<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Score de Qualit√© üìä</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="./media/Logo/Logo-Blue.png">
</head>
<body>
    <header>
        <a href="index.html" class="logo-title-link">
            <img src="./media/Logo/Logo-White.png" alt="Logo QualityInvest">
            <h1>StocksPickeur</h1>
        </a>
        <!-- MAX 3 ONGLETS -->
        <div class="onglets">
            <!-- <a href="calculator.html">Calculateur</a> -->
            <a href="wallet.html">Portefeuille</a>

        </div>
    </header>

    <h2 class="title-home">Calcule le score de Qualit√© d'une action</h2>

    <div class="calculator-home">

        <p class="calculator-text-home">Bienvenue sur notre outil de calcul du score de qualit√© d‚Äôune action ! Ce calcul repose sur une analyse approfondie de 15 crit√®res financiers et strat√©giques sp√©cifiques, qui permettent d‚Äô√©valuer la solidit√© et la rentabilit√© d‚Äôune action. Chaque crit√®re est pond√©r√© et contribue √† un score global sur 30 points. <br> Ce score vous permettra de mieux comprendre les forces et faiblesses d‚Äôune action afin de prendre des d√©cisions d‚Äôinvestissement plus √©clair√©es. Utilisez cet outil pour obtenir une √©valuation objective et compl√®te avant d‚Äôajouter une action √† votre portefeuille. Ce sont les 15 crit√®res que j'utilise √† l'heure actuelle pour analyser mes propres actions. Vous pouvez retrouver le score des actions de mon portefeuille juste ici : <a class="link-to-wallet" href="./wallet.html#quality">Score de qualit√© des actions de mon Portefeuille ‚öîÔ∏è</a> </p>

        <div class="section" id="bases">
            <h3 class="calculator-section">BASES</h3>
            <div class="input-container">
                <div class="input-group">
                    <p class="label-text">LE COURS DE L'ACTION BATS LE S&P500 SUR 5 ANS</p>
                    <input type="text" placeholder="Oui/Non">
                </div>
                <div class="input-group">
                    <p class="label-text">L'ENTREPRISE EFFECTUE DES RACHATS D'ACTIONS</p>
                    <input type="text" placeholder="Oui/Non">
                </div>
                <div class="input-group">
                    <p class="label-text">LE CHIFFRE D'AFFAIRES DE LA SOCI√âT√â EST DIVERSIFI√â</p>
                    <input type="text" placeholder="Oui/Non">
                </div>
            </div>
        </div>
    
        <div class="section" id="croissance">
            <h3 class="calculator-section">CROISSANCE</h3>
            <div class="input-container">
                <div class="input-group">
                    <p class="label-text">CROISSANCE DU CHIFFRE D'AFFAIRES SUR 10 ANS</p>
                    <input type="number" placeholder="Nombre d'ann√©es" min="0" max="10">
                </div>
                <div class="input-group">
                    <p class="label-text">CROISSANCE DU B√âN√âFICE PAR ACTION SUR 10 ANS</p>
                    <input type="number" placeholder="Nombre d'ann√©es" min="0" max="10">
                </div>
                <div class="input-group">
                    <p class="label-text">CROISSANCE DU FREE CASH FLOW SUR 10 ANS</p>
                    <input type="number" placeholder="Nombre d'ann√©es" min="0" max="10">
                </div>
            </div>
        </div>

        <div class="section" id="rentabilit√©">
            <h3 class="calculator-section">RENTABILIT√â</h3>
            <div class="input-container">
                <div class="input-group">
                    <p class="label-text">VALEUR ACTUELLE DE LA MARGE NETTE</p>
                    <input type="number" placeholder="En pourcentage (%)" step="0.01">
                </div>
                <div class="input-group">
                    <p class="label-text">VALEUR DU FREE CASH FLOW MARGIN</p>
                    <input type="number" placeholder="En pourcentage (%)" step="0.01">
                </div>
                <div class="input-group">
                    <p class="label-text">VALEUR DU RETURN ON INVESTED CAPITAL (ROIC)</p>
                    <input type="number" placeholder="En pourcentage (%)" step="0.01">
                </div>
            </div>
        </div>

        <div class="section" id="solvabilit√©">
            <h3 class="calculator-section">SOLVABILIT√â</h3>
            <div class="input-container">
                <div class="input-group">
                    <p class="label-text">VALEUR ACTUELLE DU DEBT-TO-EBITDA</p>
                    <input type="number" placeholder="En nombre flottant" step="0.01">
                </div>
                <div class="input-group">
                    <p class="label-text">VALEUR ACTUELLE DU DEBT-TO-EQUITY</p>
                    <input type="number" placeholder="En nombre flottant" step="0.01">
                </div>
                <div class="input-group">
                    <p class="label-text">VALEUR DU RATIO DE COUVERTURE DES INT√âR√äTS</p>
                    <input type="number" placeholder="En nombre flottant" step="0.01">
                </div>
            </div>
        </div>

        <div class="section" id="dividende">
            <h3 class="calculator-section">DIVIDENDE</h3>
            <div class="input-container">
                <div class="input-group">
                    <p class="label-text">VALEUR ACTUELLE DU PAYOUT RATIO</p>
                    <input type="number" placeholder="En pourcentage (%)" min="0"  step="0.01">
                </div>
                <div class="input-group">
                    <p class="label-text">VALEUR ACTUELLE DU PAYOUT RATIO DU FCF</p>
                    <input type="number" placeholder="En pourcentage (%)" min="0" step="0.01">
                </div>
                <div class="input-group">
                    <p class="label-text">CROISSANCE DU DIVIDENDE SUR 5 ANS</p>
                    <input type="number" placeholder="En pourcentage (%)" min="0" step="0.01">
                </div>
            </div>
        </div>

        <button class="calculator-button">G√©n√©rer l'Analyse</button>

    </div>

    <div class="footer">
        <div class="copyright">
            <img src="./media/Logo/Logo-Black.png" alt="Logo QualityInvest">
            <span id="copyright-text" ><a href="https://x.com/StocksPickeur" class="reset-link">StocksPickeur &copy; 2024</a></span>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> 
    
    
    <script>

//D√âCLARATION DE VARIABLES
var totalScore; //Score total de l'action

var basisScore; //Score bases
var growthScore; //Score croissance
var profitabilityScore; //Score rentabilit√©
var solvencyScore; //Score solvabilit√©
var dividendScore; //Score dividende

var sectionName = ["Bases","Croissance","Rentabilit√©","Solvabilit√©","Dividende"];

// Fonction pour r√©cup√©rer les donn√©es des inputs
function getData() {
    const inputs = document.querySelectorAll('input');
    const inputValues = [];

    inputs.forEach(input => {
        inputValues.push(input.value.trim());
    });

    console.log(inputValues);

    return inputValues;
}

function isValidNumber(value) {
    // V√©rifie si la valeur est un nombre valide
    return !isNaN(value) && value !== null && value !== '';
}

function calculateBasis(inputValues){

    var beatsINX = inputValues[0].toLowerCase();;
    var shareBuyback = inputValues[1].toLowerCase();;
    var diversifiedCA = inputValues[2].toLowerCase();;

    if (beatsINX == 'oui'){
        totalScore += 2;
        basisScore += 2;
    }

    if (shareBuyback == 'oui'){
        totalScore += 2;
        basisScore += 2;
    }

    if (diversifiedCA == 'oui'){
        totalScore += 2;
        basisScore += 2;
    }

    return basisScore;
}

function calculateGrowth(inputValues){
    var CAGrowth = inputValues[3];
    var EPSGrowth = inputValues[4];
    var FCFGrowth = inputValues[5];

    if (CAGrowth > 7){
        totalScore += 2;
        growthScore += 2;
    }

    if (EPSGrowth > 7){
        totalScore += 2;
        growthScore += 2;
    }

    if (FCFGrowth > 7){
        totalScore += 2;
        growthScore += 2;
    }

    return growthScore;
}

function calculateRentability(inputValues){
    var netMargin = inputValues[6];
    var fcfMargin = inputValues[7];
    var roic = inputValues[8];

    if (netMargin >= 35) {
        totalScore += 2;
        profitabilityScore += 2;
    } else if (netMargin >= 20) {
        totalScore += 1;
        profitabilityScore += 1;
    } else {
        totalScore += 0;
        profitabilityScore += 0;
    }

    if (fcfMargin >= 35) {
        totalScore += 2;
        profitabilityScore += 2;
    } else if (fcfMargin >= 20) {
        totalScore += 1;
        profitabilityScore += 1;
    } else {
        totalScore += 0;
        profitabilityScore += 0;
    }

    if (roic >= 30) {
        totalScore += 2;
        profitabilityScore += 2;
    } else if (roic >= 15) {
        totalScore += 1;
        profitabilityScore += 1;
    } else {
        totalScore += 0;
        profitabilityScore += 0;
    }

    return profitabilityScore;

}

function calculateSolvency(inputValues) {
    var debtToEBITDA = parseFloat(inputValues[9]);
    var debtToEquity = parseFloat(inputValues[10]);
    var interestCoverageRatio = parseFloat(inputValues[11]);

    // V√©rifie si les valeurs sont des nombres valides avant de les comparer
    if (isValidNumber(debtToEBITDA)) {
        if (debtToEBITDA < 1) {
            totalScore += 2;
            solvencyScore += 2;
        } else if (debtToEBITDA < 2) {
            totalScore += 1;
            solvencyScore += 1;
        }
    }

    if (isValidNumber(debtToEquity)) {
        if (debtToEquity < 1) {
            totalScore += 2;
            solvencyScore += 2;
        } else if (debtToEquity < 2) {
            totalScore += 1;
            solvencyScore += 1;
        }
    }

    if (isValidNumber(interestCoverageRatio)) {
        if (interestCoverageRatio >= 30) {
            totalScore += 2;
            solvencyScore += 2;
        } else if (interestCoverageRatio >= 15) {
            totalScore += 1;
            solvencyScore += 1;
        }
    }
}

function calculateDividend(inputValues) {
    var payoutRatio = parseFloat(inputValues[12]);
    var payoutRatioFCF = parseFloat(inputValues[13]);
    var dividendGrowth = parseFloat(inputValues[14]);

    // V√©rifie si les valeurs sont des nombres valides avant de les comparer
    if (isValidNumber(payoutRatio)) {
        if (payoutRatio < 30) {
            totalScore += 2;
            dividendScore += 2;
        } else if (payoutRatio < 50) {
            totalScore += 1;
            dividendScore += 1;
        }
    }

    if (isValidNumber(payoutRatioFCF)) {
        if (payoutRatioFCF < 30) {
            totalScore += 2;
            dividendScore += 2;
        } else if (payoutRatioFCF < 50) {
            totalScore += 1;
            dividendScore += 1;
        }
    }

    if (isValidNumber(dividendGrowth)) {
        if (dividendGrowth >= 10) {
            totalScore += 2;
            dividendScore += 2;
        } else if (dividendGrowth >= 5) {
            totalScore += 1;
            dividendScore += 1;
        }
    }
}



function main() {

    //attendre cliquage du bouton
    document.querySelector('.calculator-button').addEventListener('click', function () {
        
        //on r√©initialise √† 0
        totalScore = 0;
        totalScore = 0;
        basisScore = 0;
        growthScore = 0;
        profitabilityScore = 0;
        solvencyScore = 0;
        dividendScore = 0;

        // R√©cup√©rer les donn√©es des inputs
        const inputValues = getData();

        // Calculer les scores en fonction des donn√©es des inputs
        calculateBasis(inputValues);
        calculateGrowth(inputValues);
        calculateRentability(inputValues);
        calculateSolvency(inputValues);
        calculateDividend(inputValues);

        // Afficher le score total apr√®s les calculs
        console.log(totalScore);
    });


}


main();


    </script>

</body>
</html>