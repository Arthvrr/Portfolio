<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Score de Qualit√© üìä</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="media/Logo/logo.ico" type="image/x-icon">
</head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-5QFGNT3V2F"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-5QFGNT3V2F');
</script>
<body>
    <header>
        <a href="index.html" class="logo-title-link">
            <img src="./media/Logo/Logo-White.png" alt="Logo QualityInvest">
            <h1>StocksPickeur</h1>
        </a>
        <div class="onglets">
            <a href="calculator.html">Calculateur</a>
            <a href="wallet.html">Portefeuille</a>

        </div>
    </header>

    <div class="calculator-home">

        <p class="calculator-text-home">Bienvenue sur mon outil de calcul du score de qualit√© d‚Äôune action ! Ce calcul repose sur une analyse approfondie de 15 crit√®res financiers et strat√©giques sp√©cifiques, qui permettent d‚Äô√©valuer solidit√©,croissance et rentabilit√© d‚Äôune action. Chaque crit√®re est pond√©r√© et contribue √† un score global sur 30 points. <br> Ce score vous permettra de mieux comprendre les forces et faiblesses d‚Äôune action afin de prendre des d√©cisions d‚Äôinvestissement plus √©clair√©es. Ce sont les 15 crit√®res que j'utilise √† l'heure actuelle pour analyser mes propres actions. Vous pouvez retrouver le score des actions de mon portefeuille ici : <a class="link-to-wallet" href="./wallet.html#quality">Score de qualit√© des actions de mon Portefeuille ‚öîÔ∏è</a> </p>

        <div class="ticker-input-container">
            <input type="text" id="stockTicker" class="ticker-input" placeholder="Entrez le ticker (ex: AAPL)" autocomplete="off">
            <div class="safety-margin-container">
                <label>Marge de s√©curit√©: <span id="safetyMarginValue">10</span>%</label>
                <div class="slider-container">
                    <div class="slider-track">
                        <div class="slider-fill"></div>
                        <input type="range" 
                               min="0" 
                               max="6" 
                               value="2" 
                               step="1" 
                               class="slider" 
                               list="markers"
                               id="safetyMarginSlider">
                        <div class="slider-marks">
                            <span class="mark" style="left: 0%">0%</span>
                            <span class="mark" style="left: 16.66%">5%</span>
                            <span class="mark" style="left: 33.33%">10%</span>
                            <span class="mark" style="left: 50%">15%</span>
                            <span class="mark" style="left: 66.66%">20%</span>
                            <span class="mark" style="left: 83.33%">30%</span>
                            <span class="mark" style="left: 100%">50%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section" id="bases">
            <h3 class="calculator-section">BASES</h3>
            <div class="input-container">
                <div class="input-group">
                    <p class="label-text" data-tooltip="V√©rifie si l'action a perform√© mieux que l'indice S&P 500 sur les 5 derni√®res ann√©es. Indique une surperformance du march√©.">COURS DE L'ACTION BATS LE S&P500 SUR 5 ANS</p>
                    <input type="text" class="calc-input" placeholder="Oui/Non">
                </div>
                <div class="input-group">
                    <p class="label-text" data-tooltip="L'entreprise rach√®te-t-elle ses propres actions ? Cela r√©duit le nombre d'actions en circulation et augmente m√©caniquement la valeur de votre part.">L'ENTREPRISE EFFECTUE DES RACHATS D'ACTIONS</p>
                    <input type="text" class="calc-input" placeholder="Oui/Non">
                </div>
                <div class="input-group">
                    <p class="label-text" data-tooltip="L'entreprise d√©pend-elle d'un seul produit ou client ? Une diversification r√©duit le risque en cas de crise sectorielle.">LE CHIFFRE D'AFFAIRES DE LA SOCI√âT√â EST DIVERSIFI√â</p>
                    <input type="text" class="calc-input" placeholder="Oui/Non">
                </div>
            </div>
        </div>
    
        <div class="section" id="croissance">
            <h3 class="calculator-section">CROISSANCE</h3>
            <div class="input-container">
                <div class="input-group">
                    <p class="label-text" data-tooltip="Moyenne de croissance annuelle du chiffre d'affaires (Revenue) sur 10 ans. Indique la capacit√© de l'entreprise √† grandir.">CROISSANCE DU CHIFFRE D'AFFAIRES SUR 10 ANS</p>
                    <input type="number" class="calc-input" placeholder="Nombre d'ann√©es" min="0" max="10">
                </div>
                <div class="input-group">
                    <p class="label-text" data-tooltip="Croissance du B√©n√©fice Par Action (EPS). C'est le profit net divis√© par le nombre d'actions. Crucial pour l'enrichissement de l'actionnaire.">CROISSANCE DU B√âN√âFICE PAR ACTION SUR 10 ANS</p>
                    <input type="number" class="calc-input" placeholder="Nombre d'ann√©es" min="0" max="10">
                </div>
                <div class="input-group">
                    <p class="label-text" data-tooltip="Le Free Cash Flow est l'argent r√©el qui reste dans la poche de l'entreprise apr√®s avoir pay√© ses investissements.">CROISSANCE DU FREE CASH FLOW SUR 10 ANS</p>
                    <input type="number" class="calc-input" placeholder="Nombre d'ann√©es" min="0" max="10">
                </div>
            </div>
        </div>

        <div class="section" id="rentabilit√©">
            <h3 class="calculator-section">RENTABILIT√â</h3>
            <div class="input-container">
                <div class="input-group">
                    <p class="label-text" data-tooltip="Pourcentage de chiffre d'affaires transform√© en b√©n√©fice net. Plus elle est √©lev√©e, plus l'entreprise est efficace (>20% est excellent).">MARGE NETTE</p>
                    <input type="number" class="calc-input" placeholder="En pourcentage (%)" step="0.01">
                </div>
                <div class="input-group">
                    <p class="label-text" data-tooltip="Pourcentage de chiffre d'affaires transform√© en cash flow libre. Indique une v√©ritable machine √† cash.">FCF MARGIN</p>
                    <input type="number" class="calc-input" placeholder="En pourcentage (%)" step="0.01">
                </div>
                <div class="input-group">
                    <p class="label-text" data-tooltip="Return on Invested Capital. Mesure l'efficacit√© avec laquelle l'entreprise utilise son capital pour g√©n√©rer des profits.">ROIC</p>
                    <input type="number" class="calc-input" placeholder="En pourcentage (%)" step="0.01">
                </div>
            </div>
        </div>

        <div class="section" id="solvabilit√©">
            <h3 class="calculator-section">SOLVABILIT√â</h3>
            <div class="input-container">
                <div class="input-group">
                    <p class="label-text" data-tooltip="Ratio mesurant la capacit√© de l'entreprise √† rembourser sa dette avec ses revenus op√©rationnels. Doit √™tre bas (< 2.0).">DEBT-TO-EBITDA</p>
                    <input type="number" class="calc-input" placeholder="En nombre flottant" step="0.01">
                </div>
                <div class="input-group">
                    <p class="label-text" data-tooltip="Ratio comparant la dette totale aux capitaux propres. Indique le niveau d'effet de levier financier.">DEBT-TO-EQUITY</p>
                    <input type="number" class="calc-input" placeholder="En nombre flottant" step="0.01">
                </div>
                <div class="input-group">
                    <p class="label-text" data-tooltip="Combien de fois l'entreprise peut-elle payer ses charges d'int√©r√™ts avec son r√©sultat actuel ? Doit √™tre √©lev√© (> 15).">COUVERTURE DES INT√âR√äTS</p>
                    <input type="number" class="calc-input" placeholder="En nombre flottant" step="0.01">
                </div>
            </div>
        </div>

        <div class="section" id="dividende">
            <h3 class="calculator-section">DIVIDENDE</h3>
            <div class="input-container">
                <div class="input-group">
                    <p class="label-text" data-tooltip="Part des b√©n√©fices revers√©e en dividende. S'il est trop √©lev√© (>60%), le dividende peut √™tre √† risque.">PAYOUT RATIO</p>
                    <input type="number" class="calc-input" placeholder="En pourcentage (%)" min="0"  step="0.01">
                </div>
                <div class="input-group">
                    <p class="label-text" data-tooltip="Part du Free Cash Flow utilis√©e pour payer le dividende. Plus fiable que le Payout Ratio classique.">PAYOUT RATIO DU FCF</p>
                    <input type="number" class="calc-input" placeholder="En pourcentage (%)" min="0" step="0.01">
                </div>
                <div class="input-group">
                    <p class="label-text" data-tooltip="Croissance moyenne du dividende sur 5 ans. Indique si l'entreprise augmente r√©guli√®rement la r√©mun√©ration des actionnaires.">CROISSANCE SUR 5 ANS</p>
                    <input type="number" class="calc-input" placeholder="En pourcentage (%)" min="0" step="0.01">
                </div>
            </div>
        </div>

        <div class="section" id="valorisation">
            <h3 class="calculator-section">VALORISATION</h3>
            <div class="input-container">
                <div class="input-group">
                    <p class="label-text">PRIX JUSTE GURUFOCUS</p>
                    <input type="number" id="gurufocusPrice" placeholder="En nombre flottant" min="0" step="0.01">
                </div>
                <div class="input-group">
                    <p class="label-text">PRIX JUSTE TIPSRANKS</p>
                    <input type="number" id="tipsrankPrice" placeholder="En nombre flottant" min="0" step="0.01">
                </div>
                <div class="input-group">
                    <p class="label-text">PER HISTORIQUE 10 ANS</p>
                    <input type="number" id="historicalPER" placeholder="En nombre flottant" min="0" step="0.01">
                </div>
            </div>
        </div>

        <button class="calculator-button">G√©n√©rer l'Analyse</button>

        <div id="progress-container-circle" style="display: none;">
            <circle-progress id="circular-progress" max="30" value="0"></circle-progress>
            <p class="score-text" id="score-text">Le score total de votre action est de 0 sur 30 !</p>
        </div>

        <div id="radar-chart-container" style="display: none; align-items: center;">
            <canvas id="radarChart"></canvas>
        </div>

        <div id="bar-chart-container" style="display: none; align-items: center;">
            <canvas id="priceChart"></canvas>
        </div>

    </div>

    <div class="footer">
        <div class="copyright">
            <img src="./media/Logo/Logo-Black.png" alt="Logo QualityInvest">
            <span id="copyright-text" ><a href="https://x.com/StocksPickeur" class="reset-link">StocksPickeur &copy; 2025</a></span>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/js-circle-progress/dist/circle-progress.min.js" type="module"></script>

<script>
    // --- VARIABLES GLOBALES ---
    var totalScore = 0;
    var basisScore = 0;
    var growthScore = 0;
    var profitabilityScore = 0;
    var solvencyScore = 0;
    var dividendScore = 0;

    var currentTicker = "AAPL"; 
    var currentStockPrice = null; // Sera rempli par l'API
    var fairPrice = 0;
    var currentPERatio = null;
    
    // Variables pour les prix justes (inputs manuels)
    var gurufocusPrice = 0;
    var tipsrankPrice = 0;
    
    var safetyMargin = 0.1; // 10% par d√©faut

    // Cl√© API Finnhub
    const FINNHUB_API_KEY = 'cfeip41r01qoicaf4hk0cfeip41r01qoicaf4hkg';

    // Tableaux pour les graphiques
    var sectionName = ["Bases","Croissance","Rentabilit√©","Solvabilit√©","Dividende"];
    var resultCriteria = []; // Stocke les r√©sultats d√©taill√©s si besoin

    let radarChartInstance = null;
    let priceChartInstance = null;

    // --- FONCTIONS UTILITAIRES ---

    function isValidNumber(value) {
        return !isNaN(value) && value !== null && value !== '';
    }

    function updatePrices() {
        gurufocusPrice = parseFloat(document.getElementById('gurufocusPrice').value) || 0;
        tipsrankPrice = parseFloat(document.getElementById('tipsrankPrice').value) || 0;
    }

    function updateSafetyMarginDisplay(value) {
        const marginValues = [0, 5, 10, 15, 20, 30, 50]; 
        const marginValue = marginValues[value];
        document.getElementById('safetyMarginValue').textContent = marginValue;
        return marginValue / 100;
    }

    // --- FONCTIONS API ---

    async function getStockPrice(symbol) {
        try {
            const response = await fetch(`https://finnhub.io/api/v1/quote?symbol=${symbol}&token=${FINNHUB_API_KEY}`);
            const data = await response.json();
            // Finnhub renvoie 'c' pour Current Price
            if (data && data.c) {
                return data.c;
            }
            return null;
        } catch (error) {
            console.error('Erreur API Prix:', error);
            return null;
        }
    }

    async function getPERatio(symbol) {
        try {
            const response = await fetch(`https://finnhub.io/api/v1/stock/metric?symbol=${symbol}&metric=valuation&token=${FINNHUB_API_KEY}`);
            const data = await response.json();
            if (data.metric && data.metric.peNormalizedAnnual) {
                return parseFloat(data.metric.peNormalizedAnnual.toFixed(2));
            }
            return null;
        } catch (error) {
            console.error('Erreur API PE:', error);
            return null;
        }
    }

    // --- FONCTIONS DE CALCUL ---

    function getData() {
        // On cible uniquement les inputs de calcul (.calc-input)
        const inputs = document.querySelectorAll('.calc-input');
        const inputValues = [];
        inputs.forEach(input => inputValues.push(input.value.trim()));
        return inputValues;
    }

    function calculateBasis(inputValues){
        var beatsINX = inputValues[0].toLowerCase();
        var shareBuyback = inputValues[1].toLowerCase();
        var diversifiedCA = inputValues[2].toLowerCase();

        if (beatsINX == 'oui') { totalScore += 2; basisScore += 2; }
        if (shareBuyback == 'oui') { totalScore += 2; basisScore += 2; }
        if (diversifiedCA == 'oui') { totalScore += 2; basisScore += 2; }
        return basisScore;
    }

    function calculateGrowth(inputValues){
        var CAGrowth = parseFloat(inputValues[3]);
        var EPSGrowth = parseFloat(inputValues[4]);
        var FCFGrowth = parseFloat(inputValues[5]);

        if (CAGrowth > 7) { totalScore += 2; growthScore += 2; }
        if (EPSGrowth > 7) { totalScore += 2; growthScore += 2; }
        if (FCFGrowth > 7) { totalScore += 2; growthScore += 2; }
        return growthScore;
    }

    function calculateProfitability(inputValues){
        var netMargin = parseFloat(inputValues[6]);
        var fcfMargin = parseFloat(inputValues[7]);
        var roic = parseFloat(inputValues[8]);

        if (netMargin >= 35) { totalScore += 2; profitabilityScore += 2; }
        else if (netMargin >= 20) { totalScore += 1; profitabilityScore += 1; }

        if (fcfMargin >= 35) { totalScore += 2; profitabilityScore += 2; }
        else if (fcfMargin >= 20) { totalScore += 1; profitabilityScore += 1; }

        if (roic >= 30) { totalScore += 2; profitabilityScore += 2; }
        else if (roic >= 15) { totalScore += 1; profitabilityScore += 1; }
        return profitabilityScore;
    }

    function calculateSolvency(inputValues) {
        var debtToEBITDA = parseFloat(inputValues[9]);
        var debtToEquity = parseFloat(inputValues[10]);
        var interestCoverageRatio = parseFloat(inputValues[11]);

        if (isValidNumber(debtToEBITDA)) {
            if (debtToEBITDA < 1) { totalScore += 2; solvencyScore += 2; }
            else if (debtToEBITDA < 2) { totalScore += 1; solvencyScore += 1; }
        }
        if (isValidNumber(debtToEquity)) {
            if (debtToEquity < 1) { totalScore += 2; solvencyScore += 2; }
            else if (debtToEquity < 2) { totalScore += 1; solvencyScore += 1; }
        }
        if (isValidNumber(interestCoverageRatio)) {
            if (interestCoverageRatio >= 30) { totalScore += 2; solvencyScore += 2; }
            else if (interestCoverageRatio >= 15) { totalScore += 1; solvencyScore += 1; }
        }
        return solvencyScore;
    }

    function calculateDividend(inputValues) {
        var payoutRatio = parseFloat(inputValues[12]);
        var payoutRatioFCF = parseFloat(inputValues[13]);
        var dividendGrowth = parseFloat(inputValues[14]);

        if (isValidNumber(payoutRatio)) {
            if (payoutRatio < 30) { totalScore += 2; dividendScore += 2; }
            else if (payoutRatio < 50) { totalScore += 1; dividendScore += 1; }
        }
        if (isValidNumber(payoutRatioFCF)) {
            if (payoutRatioFCF < 30) { totalScore += 2; dividendScore += 2; }
            else if (payoutRatioFCF < 50) { totalScore += 1; dividendScore += 1; }
        }
        if (isValidNumber(dividendGrowth)) {
            if (dividendGrowth >= 10) { totalScore += 2; dividendScore += 2; }
            else if (dividendGrowth >= 5) { totalScore += 1; dividendScore += 1; }
        }
        return dividendScore;
    }

    function getFairPrice(gurufocusPrice, tipsrankPrice, safetyMargin) {
        const averagePrice = (gurufocusPrice + tipsrankPrice) / 2;
        fairPrice = averagePrice * (1 - safetyMargin);
        return fairPrice;
    }

    // --- GRAPHIQUES ---

    function createRadarChart(sectionScores) {
        const ctx = document.getElementById('radarChart').getContext('2d');
        
        if (radarChartInstance) {
            radarChartInstance.data.datasets[0].data = sectionScores;
            radarChartInstance.update();
        } else {
            radarChartInstance = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: sectionName,
                    datasets: [{
                        label: 'Score par Section',
                        data: sectionScores,
                        backgroundColor: 'rgba(53, 162, 235, 0.2)',
                        borderColor: 'rgba(53, 162, 235, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: { legend: { display: false }, title: { display: true, text: "ScoreCard de l'Action", font: { size: 16 } } },
                    scales: { r: { min: 0, max: 6, ticks: { stepSize: 1 } } },
                    elements: { line: { tension: 0 } }
                }
            });
        }
    }

    function createFairPriceChart(currentPrice, fairPrice) {
        // Pr√©paration des donn√©es en Tableaux [] pour Chart.js
        const chartLabels = [currentTicker]; 
        const currentPriceData = [currentPrice];
        const fairPriceData = [fairPrice];
        const guruData = [gurufocusPrice];
        const tipsData = [tipsrankPrice];

        const ctx = document.getElementById('priceChart').getContext('2d');

        if (priceChartInstance) {
            priceChartInstance.data.labels = chartLabels;
            priceChartInstance.data.datasets[0].data = currentPriceData;
            priceChartInstance.data.datasets[1].data = fairPriceData;
            priceChartInstance.data.datasets[2].data = guruData;
            priceChartInstance.data.datasets[3].data = tipsData;
            priceChartInstance.update();
        } else {   
            priceChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: chartLabels,
                    datasets: [
                        {
                            label: "Prix Actuel",
                            type: 'bar',
                            data: currentPriceData,
                            backgroundColor: 'rgba(54, 162, 235, 0.5)',
                            borderColor: 'rgba(54, 162, 235, 1)',
                            borderWidth: 2
                        },
                        {
                            label: "Prix Juste (Calcul√©)",
                            type: 'bar',
                            data: fairPriceData,
                            backgroundColor: 'rgba(255, 99, 132, 0.5)',
                            borderColor: 'rgba(255, 99, 132, 1)',
                            borderWidth: 2,
                        },
                        {
                            label: "Prix GuruFocus",
                            type: 'line',
                            data: guruData,
                            borderColor: 'rgba(75, 192, 192, 1)',
                            borderWidth: 2,
                            pointBackgroundColor: 'rgba(75, 192, 192, 1)',
                            fill: false,
                            tension: 0.2,
                            pointRadius: 8
                        },
                        {
                            label: "Prix TipsRank",
                            type: 'line',
                            data: tipsData,
                            borderColor: 'rgba(255, 159, 64, 1)',
                            borderWidth: 2,
                            backgroundColor: 'rgba(255, 159, 64, 0.2)',
                            fill: false,
                            tension: 0.2,
                            pointRadius: 8
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: true, position: 'bottom' },
                        title: { display: true, text: "Comparaison des Prix", font: { size: 16 } }
                    },
                    scales: { y: { beginAtZero: true } }
                }
            });
        }
    }

    // --- INITIALISATION ET √âV√âNEMENTS ---

    // √âv√©nements pour inputs manuels
    document.getElementById('gurufocusPrice').addEventListener('input', updatePrices);
    document.getElementById('tipsrankPrice').addEventListener('input', updatePrices);

    // Slider Marge de S√©curit√©
    const slider = document.getElementById('safetyMarginSlider');
    slider.addEventListener('input', function() {
        safetyMargin = updateSafetyMarginDisplay(parseInt(this.value));
    });
    // Init slider
    slider.value = 2; 
    safetyMargin = updateSafetyMarginDisplay(2);

    // √âv√©nement touche "Entr√©e" sur la barre de recherche
    document.getElementById('stockTicker').addEventListener('keypress', async function(e) {
        if (e.key === 'Enter') {
            const ticker = this.value.trim().toUpperCase();
            if (ticker) {
                this.placeholder = 'Chargement...';
                currentTicker = ticker;
                const price = await getStockPrice(ticker);
                const pe = await getPERatio(ticker);
                
                if (price) {
                    currentStockPrice = price;
                    currentPERatio = pe;
                    this.placeholder = `${ticker} charg√© (${price}$)`;
                } else {
                    this.placeholder = 'Erreur r√©cup√©ration prix';
                }
            }
        }
    });

    // --- FONCTION MAIN (BOUTON G√âN√âRER) ---
    // Ajout de 'async' ici pour pouvoir attendre l'API si n√©cessaire
    document.querySelector('.calculator-button').addEventListener('click', async function () {
        
        // 1. V√âRIFICATION ET R√âCUP√âRATION DU PRIX (CORRECTIF ICI)
        const tickerInput = document.getElementById('stockTicker');
        const tickerInputVal = tickerInput.value.trim().toUpperCase();

        // Si l'utilisateur a chang√© le ticker mais n'a pas fait Entr√©e, ou si on a pas de prix
        if (tickerInputVal && (tickerInputVal !== currentTicker || currentStockPrice === null)) {
            console.log("Tentative de r√©cup√©ration automatique du prix...");
            currentTicker = tickerInputVal;
            tickerInput.placeholder = "Chargement...";
            
            // On force la r√©cup√©ration du prix maintenant
            const fetchedPrice = await getStockPrice(currentTicker);
            const fetchedPE = await getPERatio(currentTicker);

            if (fetchedPrice) {
                currentStockPrice = fetchedPrice;
                currentPERatio = fetchedPE;
                tickerInput.placeholder = `${currentTicker} charg√© (${fetchedPrice}$)`;
            } else {
                alert("Impossible de r√©cup√©rer le prix pour " + currentTicker + ". V√©rifiez le ticker ou votre connexion.");
                // On peut d√©cider d'arr√™ter ici ou de continuer avec un prix de 0
            }
        }

        if (currentStockPrice === null) {
            alert("Attention : Le prix actuel de l'action n'est pas d√©fini. Le graphique sera incomplet.");
            currentStockPrice = 0; // Pour √©viter que le graphique ne plante
        }

        // 2. REINITIALISATION DES SCORES
        totalScore = 0; basisScore = 0; growthScore = 0; profitabilityScore = 0; solvencyScore = 0; dividendScore = 0;

        // 3. CALCULS
        const inputValues = getData();
        calculateBasis(inputValues);
        calculateGrowth(inputValues);
        calculateProfitability(inputValues);
        calculateSolvency(inputValues);
        calculateDividend(inputValues);

        getFairPrice(gurufocusPrice, tipsrankPrice, safetyMargin);
        
        // 4. AFFICHAGE
        var sectionScores = [basisScore,growthScore,profitabilityScore,solvencyScore,dividendScore];

        // Cercle de progression
        const progressContainer = document.getElementById('progress-container-circle');
        progressContainer.style.display = 'block';
        
        const circleProgress = document.getElementById('circular-progress');
        circleProgress.setAttribute('value', totalScore); 
        circleProgress.setAttribute('max', 30); 

        const scoreText = document.getElementById('score-text');
        scoreText.textContent = `Le score de Qualit√© de votre action est de ${totalScore} sur 30 !`;

        setTimeout(() => { progressContainer.scrollIntoView({ behavior: 'smooth' }); }, 100);

        // Radar Chart
        document.getElementById('radar-chart-container').style.display = 'flex';
        createRadarChart(sectionScores);
        
        // Price Chart
        document.getElementById('bar-chart-container').style.display = 'flex';
        createFairPriceChart(currentStockPrice, fairPrice);
    });
</script>

</body>
</html>